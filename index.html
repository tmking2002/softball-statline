<!DOCTYPE html>
<html>
    <head>
        <title>Softball Statline</title>
        <link rel="icon" type = image/png href="logo_small.png">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Get comprehensive game stats for NCAA Softball D1, D2, and D3. Analyze player performances and team statistics with Softball Statline.">
        <meta name="keywords" content="NCAA Softball, Softball Stats, D1, D2, D3, College Softball, Softball Game Statistics, Player Performance Metrics, Softball Teams, Softball Scores, Softball Analysis, Softball Highlights, NCAA Softball Rankings, Softball Records, Softball Season, Softball Standings">
        <meta property="og:title" content="Softball Statline - NCAA Softball Stats">
        <meta property="og:description" content="Get comprehensive game stats for NCAA Softball D1, D2, and D3. Analyze player performances and team statistics with Softball Statline.">
        <meta property="og:image" content="logo.png">
        <meta property="og:url" content="https://softballstatline.com">
        <meta name="twitter:card" content="summary_large_image">
        
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-teal.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-YFFKCYZJXV"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'G-YFFKCYZJXV');
        </script>

        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8754067983414109" crossorigin="anonymous"></script>
        
        <style>

            @media screen and (max-width: 768px) {
                .w3-hide-medium,
                .w3-hide-large {
                display: block !important;
                }
                .w3-bar-item {
                text-align: center;
                }
                .w3-dropdown-content {
                position: relative !important;
                }
            }

            table {
                width: 100%;
                border-collapse: collapse;
            }

            th,
            td {
                border: 1px solid #ccc;
                padding: 4px;
                text-align: center;
                width: auto;
            }

            th {
                background-color: #f2f2f2;
            }

            .game-container {
                display: flex;
                flex-direction: column; /* Stack the rows vertically */
                align-items: center; /* Center the content horizontally */
                border: 1px solid #cccccc;
                width: 300px;
                margin: 10px 0;
            }

            .team-row {
                width: 100%;
                display: flex;
                justify-content: left;
                border-bottom: 1px solid #cccccc; /* Add a border between the rows */
                padding: 5px 0; /* Add some vertical padding */
                justify-content: space-between; /* Add space between the logo/team name and the score */
            }

            .team-row:last-child {
                border-bottom: none; /* Remove border on the last row */
            }

            .logo-container {
                width: 30px; /* Set the width of the logo container */
                display: flex;
                align-items: center;
            }

            .name-container {
                align-items: left;
                width: 250px;
            }

            .team-row img {
                width: 25px;
                height: 25px;
            }

            .team-row td {
                border: 0;
                text-align: left;
            }

            .winning-score {
                color: rgb(22, 82, 22);
            }

            .date-input-container {
                margin-bottom: 10px;
            }

            .dateInput {
                width: 40%;
                color: grey; /* Set text color to white */
                border: 1px solid black; /* Set border color to white */
                border-radius: 5px; /* Add rounded corners for a nicer look */
                padding: 5px; /* Add some padding for better spacing */
                text-align: center;
            }

        </style>
    </head>
    <body>

        <div class="w3-top">
            <div class="w3-bar w3-theme w3-top w3-center-align w3-large">
                <div class="w3-dropdown-hover w3-hide-medium w3-hide-large" style="display: inline-block; ">
                    <button class="w3-button w3-padding-16" style="background-color: #009688; color: white;">
                       Menu<i class="fa fa-caret-down"></i>
                    </button>
                    <div class="w3-dropdown-content w3-card-4 w3-bar-block" style="background-color: #404040; z-index: 2;">
                        <button class="w3-bar-item w3-button testbtn w3-padding-16" style="background-color: #404040; color: white;" onclick="window.location.href=''">Home</button>
                        <button class="w3-bar-item w3-button testbtn w3-padding-16" style="background-color: #404040; color: white;" onclick="window.location.href='player_search'">Players</button>
                        <button class="w3-bar-item w3-button testbtn w3-padding-16" style="background-color: #404040; color: white;" onclick="window.location.href='team_search'">Teams</button>
                        <button class="w3-bar-item w3-button testbtn w3-padding-16" style="background-color: #404040; color: white;" onclick="window.location.href='coach_search'">Coaches</button>
                        <button class="w3-bar-item w3-button testbtn w3-padding-16" style="background-color: #404040; color: white;" onclick="window.location.href='leaders_search'">Leaders</button>
                    </div>
                  </div>
              </div>
              <div class="w3-bar w3-theme w3-top w3-left-align w3-large">
                <a href="" class="w3-bar-item w3-button w3-hide-small w3-hover-white" style="background-color: #009688;">Home</a>
                <a href="player_search" class="w3-bar-item w3-button w3-hide-small w3-hover-white" style="background-color: #404040">Players</a>
                <a href="team_search" class="w3-bar-item w3-button w3-hide-small w3-hover-white" style="background-color: #404040;">Teams</a>
                <a href="coach_search" class="w3-bar-item w3-button w3-hide-small w3-hover-white" style="background-color: #404040;">Coaches</a>
                <a href="leaders_search" class="w3-bar-item w3-button w3-hide-small w3-hover-white" style="background-color: #404040;">Leaders</a>
              </div>
            </div>
          </div>

        <!-- Header -->
        <header class="w3-container w3-theme w3-padding" id="myHeader">
          <div class="w3-center" style="position: relative; margin-top: 50px;"> 
            <img src="logo.png" style="max-width: 100%; height: auto; display: block; margin: 0 auto;">
          </div>
        </header>

        <div class="w3-row-padding w3-center w3-margin-top">
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px">
          <h3>Schedule</h3><br>

          <div class="date-input-container">
            <input type="date" class="dateInput" id="dateInput" name="dateInput" value="2023-06-08" min="2023-02-01" max="2023-06-08" onchange="createDataTable_d1(this.value); createDataTable_d2(this.value); createDataTable_d3(this.value);">
          </div>
          
          <div class="w3-bar w3-theme">
              <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openSchedule(event,'D1-schedule')">D1</button>
              <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openSchedule(event,'D2-schedule')">D2</button>
              <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openSchedule(event,'D3-schedule')">D3</button>
          </div>

            <p><span id="dateOutput"></span></p>

            <div id="D1-schedule" class="w3-container city w3-animate-opacity">
              <div id="schedule-container-d1" style="display: flex; flex-direction: column; align-items: center; overflow: auto; height: 800px;"></div>
            </div>

            <div id="D2-schedule" class="w3-container city w3-animate-opacity">
              <div id="schedule-container-d2" style="display: flex; flex-direction: column; align-items: center; overflow: auto; height: 800px;"></div>
            </div>

            <div id="D3-schedule" class="w3-container city w3-animate-opacity">
              <div id="schedule-container-d3" style="display: flex; flex-direction: column; align-items: center; overflow: auto; height: 800px;"></div>
            </div>
          </div>
        </div>

        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px">
            <h3>Current RPI Rankings</h3><br>
            <div class="w3-bar w3-theme" style="margin-bottom: 25px;">
              <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openRPI(event,'D1-rpi')">D1</button>
              <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openRPI(event,'D2-rpi')">D2</button>
              <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openRPI(event,'D3-rpi')">D3</button>
            </div>

            <div id="D1-rpi" class="w3-container city w3-animate-opacity">
              <div id="rpi-container-d1" style="display: flex; flex-direction: column; align-items: center; overflow: auto; height: 800px;"></div>
            </div>

            <div id="D2-rpi" class="w3-container city w3-animate-opacity">
              <div id="rpi-container-d2" style="display: flex; flex-direction: column; align-items: center; overflow: auto; height: 800px;"></div>
            </div>

            <div id="D3-rpi" class="w3-container city w3-animate-opacity">
              <div id="rpi-container-d3" style="display: flex; flex-direction: column; align-items: center; overflow: auto; height: 800px;"></div>
            </div>
          </div>
        </div>

        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px">
          <h3>Conference Standings</h3><br>
          <div id="conf-name" style="font-size: 20px; font-weight: bold"></div>
          <div class="w3-dropdown-hover">
            <button class="w3-button w3-padding-16">
               Select Conference<i class="fa fa-caret-down"></i>
            </button>
            <div class="w3-dropdown-content w3-card-4 w3-bar-block">
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'AAC')">AAC</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'ACC')">ACC</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'America East')">America East</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'ASUN')">ASUN</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Atlantic 10')">Atlantic 10</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Big 12')">Big 12</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Big East')">Big East</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Big Sky')">Big Sky</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Big South')">Big South</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Big Ten')">Big Ten</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Big West')">Big West</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'C-USA')">C-USA</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'CAA')">CAA</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Horizon')">Horizon</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Ivy League')">Ivy League</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'MAAC')">MAAC</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'MAC')">MAC</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'MEAC')">MEAC</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Mountain West')">Mountain West</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'MVC')">MVC</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'NEC')">NEC</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'OVC')">OVC</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Pac-12')">Pac-12</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Patriot')">Patriot</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'SEC')">SEC</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'SoCon')">SoCon</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Southland')">Southland</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Summit League')">Summit League</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'Sun Belt')">Sun Belt</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'SWAC')">SWAC</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'WAC')">WAC</button>
                <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openConf(event,'WCC')">WCC</button>
            </div>
          </div>
          <div id="conf-standings" class="w3-container city w3-animate-opacity">
              <div id="conf-table"></div>
          </div>
          </div>
        </div>

        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8754067983414109"
            crossorigin="anonymous"></script>
        <!-- Test Ad -->
        <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-8754067983414109"
            data-ad-slot="3543197831"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>

        <footer class="w3-container w3-theme-teal w3-padding" style="text-align: center; margin-top: 100px !important">
            <p>2023 Softball Statline</p>
            <p><a href="https://twitter.com/SBStatline"><i class="fab fa-twitter"></i></a> Created by Tyson King</p>
        </footer>

        

        <script>
            // store todays date
            var today = new Date();
            var dd = today.getDate();
            var mm = today.getMonth()+1; //January is 0 so need to add 1 to make it 1!
            var yyyy = today.getFullYear();
            if(dd<10){
                    dd='0'+dd
                } 
                if(mm<10){
                    mm='0'+mm
                }
            
            today = yyyy+'-'+mm+'-'+dd;
            
            // use this as default going during the season

            // Function to fetch CSV file and create the data table
            function createDataTable_d1(dateInput) {
                fetch('rpi_rankings/d1_rpi.csv')
                    .then(response => response.text())
                    .then(data => {
                        const rows = data.split('\n');
                        const tableContainer = document.getElementById('rpi-container-d1');
                        const table = document.createElement('table');

                        // Create table header
                        const headerRow = document.createElement('tr');
                        const headers = rows[0].split(',').slice(0,-1);
                        headers.forEach(header => {
                            const th = document.createElement('th');
                            th.textContent = header;
                            headerRow.appendChild(th);
                        });
                        table.appendChild(headerRow);

                        // Create table rows
                        for (let i = 1; i < rows.length; i++) {
                            const row = document.createElement('tr');
                            const rowData = rows[i].split(',').slice(0,-1);
                            
                            rowData.forEach((cellData, index) => {
                            const cell = document.createElement(index === 1 ? 'th' : 'td');
                            let teamID = rows[i].split(',')[3];
                            
                            if(index !== 3){
                                if (index === 1) {
                                    const teamLink = document.createElement('a');
                                    teamLink.href = `team_info?teamID=${teamID}`;
                                    teamLink.textContent = cellData;
                                    cell.appendChild(teamLink);
                                } else {
                                    cell.textContent = cellData;
                                }   
                            }

                            row.appendChild(cell);
                            });

                            table.appendChild(row);
                        }

                        table.deleteRow(table.rows.length - 1) 
                    
                        // Add the table to the container
                        tableContainer.appendChild(table);
                    })
                
                if (dateInput > '2023-06-08') {
                    dateInput_d1 = '2023-06-08';
                } else {
                    dateInput_d1 = dateInput;
                }
                const tableContainer = document.getElementById('schedule-container-d1');
                tableContainer.innerHTML = '';
                fetch('schedule/schedule_data/d1/' + dateInput_d1 + '.csv')
                    .then(response => response.text())
                    .then(data => {
                        const rows = data.split('\n');
                        const tableContainer = document.getElementById('schedule-container-d1');
                        const table = document.createElement('table');

                        // Create table rows
                        for (let i = 1; i < rows.length - 1; i++) {
                            const rowData = rows[i].split(',').slice(1,);

                            const awayScore = parseInt(rowData[7]);
                            const homeScore = parseInt(rowData[3]);

                            const gameContainer = document.createElement('div'); // Use div for the container
                            gameContainer.classList.add('game-container'); // Add the appropriate CSS class

                            const awayRow = document.createElement('tr'); // Use div for the rows
                            awayRow.classList.add('team-row'); // Add the appropriate CSS class
                            
                            const awayLogoContainer = document.createElement('td');
                            awayLogoContainer.classList.add('logo-container');
                            const awayLogo = document.createElement('img');
                            awayLogo.src = rowData[4].slice(1, -1);
                            awayLogo.width = 25;
                            awayLogo.height = 25;
                            awayLogoContainer.appendChild(awayLogo);

                            const awayNameContainer = document.createElement('td');
                            awayNameContainer.classList.add('name-container');
                            const awayName = document.createElement('a');
                            awayName.textContent = rowData[6].slice(1, -1);
                            awayName.href = `team_info?teamID=${rowData[5]}`
                            awayNameContainer.appendChild(awayName);

                            const awayRuns = document.createElement('td');
                            awayRuns.textContent = rowData[7];

                            const homeRow = document.createElement('tr'); // Use div for the rows
                            homeRow.classList.add('team-row'); // Add the appropriate CSS class

                            const homeLogoContainer = document.createElement('td');
                            homeLogoContainer.classList.add('logo-container');
                            const homeLogo = document.createElement('img');
                            homeLogo.src = rowData[0].slice(1, -1);
                            homeLogo.width = 25;
                            homeLogo.height = 25;
                            homeLogoContainer.appendChild(homeLogo);

                            const homeNameContainer = document.createElement('td');
                            homeNameContainer.classList.add('name-container');
                            const homeName = document.createElement('a');
                            homeName.textContent = rowData[2].slice(1, -1);
                            homeName.href = `team_info?teamID=${rowData[1]}`
                            homeNameContainer.appendChild(homeName);

                            const homeRuns = document.createElement('td');
                            homeRuns.textContent = rowData[3];
                            

                            if (awayScore > homeScore) {
                                awayName.classList.add('winning-score');
                                awayRuns.classList.add('winning-score');
                            } else if (homeScore > awayScore) {
                                homeName.classList.add('winning-score');
                                homeRuns.classList.add('winning-score');
                            }

                            awayRow.appendChild(awayLogoContainer);
                            awayRow.appendChild(awayNameContainer);

                            homeRow.appendChild(homeLogoContainer);
                            homeRow.appendChild(homeNameContainer);

                            awayRow.appendChild(awayRuns);
                            homeRow.appendChild(homeRuns);

                            const boxLink = document.createElement('a');
                            boxLink.textContent = 'Box';
                            boxLink.href = `game_info?gameID=${rowData[8].slice(1, -1)}&season=${rowData[9]}`;

                            gameContainer.appendChild(awayRow);
                            gameContainer.appendChild(homeRow);
                            gameContainer.appendChild(boxLink);

                            tableContainer.appendChild(gameContainer);

                        }
                        
                    })
                    .catch(error => console.error('Error fetching CSV:', error));
            }
            
            function createDataTable_d2(dateInput) {
                fetch('rpi_rankings/d2_rpi.csv')
                    .then(response => response.text())
                    .then(data => {
                        const rows = data.split('\n');
                        const tableContainer = document.getElementById('rpi-container-d2');
                        const table = document.createElement('table');

                        // Create table header
                        const headerRow = document.createElement('tr');
                        const headers = rows[0].split(',').slice(0,-1);
                        headers.forEach(header => {
                            const th = document.createElement('th');
                            th.textContent = header;
                            headerRow.appendChild(th);
                        });
                        table.appendChild(headerRow);

                        // Create table rows
                        for (let i = 1; i < rows.length; i++) {
                            const row = document.createElement('tr');
                            const rowData = rows[i].split(',').slice(0,-1);
                            
                            rowData.forEach((cellData, index) => {
                            const cell = document.createElement(index === 1 ? 'th' : 'td');
                            let teamID = rows[i].split(',')[3];
                            
                            if(index !== 3){
                                if (index === 1) {
                                    const teamLink = document.createElement('a');
                                    teamLink.href = `team_info?teamID=${teamID}`;
                                    teamLink.textContent = cellData;
                                    cell.appendChild(teamLink);
                                } else {
                                    cell.textContent = cellData;
                                }   
                            }

                            row.appendChild(cell);
                            });

                            table.appendChild(row);
                        }

                        table.deleteRow(table.rows.length - 1) 
                    
                        // Add the table to the container
                        tableContainer.appendChild(table);
                    })

                if (dateInput > '2023-05-31') {
                    dateInput_d2 = '2023-05-31';
                } else {
                    dateInput_d2 = dateInput;
                }
                const tableContainer = document.getElementById('schedule-container-d2');
                tableContainer.innerHTML = '';
                fetch('schedule/schedule_data/d2/' + dateInput_d2 + '.csv')
                    .then(response => response.text())
                    .then(data => {
                        const rows = data.split('\n');
                        const tableContainer = document.getElementById('schedule-container-d2');
                        const table = document.createElement('table');

                        // Create table rows
                        for (let i = 1; i < rows.length - 1; i++) {
                            const rowData = rows[i].split(',').slice(1,);

                            const awayScore = parseInt(rowData[7]);
                            const homeScore = parseInt(rowData[3]);

                            const gameContainer = document.createElement('div'); // Use div for the container
                            gameContainer.classList.add('game-container'); // Add the appropriate CSS class

                            const awayRow = document.createElement('tr'); // Use div for the rows
                            awayRow.classList.add('team-row'); // Add the appropriate CSS class
                            
                            const awayLogoContainer = document.createElement('td');
                            awayLogoContainer.classList.add('logo-container');
                            const awayLogo = document.createElement('img');
                            awayLogo.src = rowData[4].slice(1, -1);
                            awayLogo.width = 25;
                            awayLogo.height = 25;
                            awayLogoContainer.appendChild(awayLogo);

                            const awayNameContainer = document.createElement('td');
                            awayNameContainer.classList.add('name-container');
                            const awayName = document.createElement('a');
                            awayName.textContent = rowData[6].slice(1, -1);
                            awayName.href = `team_info?teamID=${rowData[5]}`
                            awayNameContainer.appendChild(awayName);

                            const awayRuns = document.createElement('td');
                            awayRuns.textContent = rowData[7];

                            const homeRow = document.createElement('tr'); // Use div for the rows
                            homeRow.classList.add('team-row'); // Add the appropriate CSS class

                            const homeLogoContainer = document.createElement('td');
                            homeLogoContainer.classList.add('logo-container');
                            const homeLogo = document.createElement('img');
                            homeLogo.src = rowData[0].slice(1, -1);
                            homeLogo.width = 25;
                            homeLogo.height = 25;
                            homeLogoContainer.appendChild(homeLogo);

                            const homeNameContainer = document.createElement('td');
                            homeNameContainer.classList.add('name-container');
                            const homeName = document.createElement('a');
                            homeName.textContent = rowData[2].slice(1, -1);
                            homeName.href = `team_info?teamID=${rowData[1]}`
                            homeNameContainer.appendChild(homeName);

                            const homeRuns = document.createElement('td');
                            homeRuns.textContent = rowData[3];
                            

                            if (awayScore > homeScore) {
                                awayName.classList.add('winning-score');
                                awayRuns.classList.add('winning-score');
                            } else if (homeScore > awayScore) {
                                homeName.classList.add('winning-score');
                                homeRuns.classList.add('winning-score');
                            }

                            awayRow.appendChild(awayLogoContainer);
                            awayRow.appendChild(awayNameContainer);

                            homeRow.appendChild(homeLogoContainer);
                            homeRow.appendChild(homeNameContainer);

                            awayRow.appendChild(awayRuns);
                            homeRow.appendChild(homeRuns);

                            const boxLink = document.createElement('a');
                            boxLink.textContent = 'Box';
                            boxLink.href = `game_info?gameID=${rowData[8].slice(1, -1)}&season=${rowData[9]}`;

                            gameContainer.appendChild(awayRow);
                            gameContainer.appendChild(homeRow);
                            gameContainer.appendChild(boxLink);

                            tableContainer.appendChild(gameContainer);

                        }
                        
                    })
                    .catch(error => console.error('Error fetching CSV:', error));
            }
            
            function createDataTable_d3(dateInput) {
                fetch('rpi_rankings/d3_rpi.csv')
                    .then(response => response.text())
                    .then(data => {
                        const rows = data.split('\n');
                        const tableContainer = document.getElementById('rpi-container-d3');
                        const table = document.createElement('table');

                        // Create table header
                        const headerRow = document.createElement('tr');
                        const headers = rows[0].split(',').slice(0,-1);
                        headers.forEach(header => {
                            const th = document.createElement('th');
                            th.textContent = header;
                            headerRow.appendChild(th);
                        });
                        table.appendChild(headerRow);

                        // Create table rows
                        for (let i = 1; i < rows.length; i++) {
                            const row = document.createElement('tr');
                            const rowData = rows[i].split(',').slice(0,-1);
                            
                            rowData.forEach((cellData, index) => {
                            const cell = document.createElement(index === 1 ? 'th' : 'td');
                            let teamID = rows[i].split(',')[3];
                            
                            if(index !== 3){
                                if (index === 1) {
                                    const teamLink = document.createElement('a');
                                    teamLink.href = `team_info?teamID=${teamID}`;
                                    teamLink.textContent = cellData;
                                    cell.appendChild(teamLink);
                                } else {
                                    cell.textContent = cellData;
                                }   
                            }

                            row.appendChild(cell);
                            });

                            table.appendChild(row);
                        }

                        table.deleteRow(table.rows.length - 1) 
                    
                        // Add the table to the container
                        tableContainer.appendChild(table);
                    })

                if (dateInput > '2023-06-07') {
                    dateInput_d3 = '2023-06-07';
                } else {
                    dateInput_d3 = dateInput;
                }
                const tableContainer = document.getElementById('schedule-container-d3');
                tableContainer.innerHTML = '';
                fetch('schedule/schedule_data/d3/' + dateInput_d3 + '.csv')
                    .then(response => response.text())
                    .then(data => {
                        const rows = data.split('\n');
                        const tableContainer = document.getElementById('schedule-container-d3');
                        const table = document.createElement('table');

                        // Create table rows
                        for (let i = 1; i < rows.length - 1; i++) {
                            const rowData = rows[i].split(',').slice(1,);

                            const awayScore = parseInt(rowData[7]);
                            const homeScore = parseInt(rowData[3]);

                            const gameContainer = document.createElement('div'); // Use div for the container
                            gameContainer.classList.add('game-container'); // Add the appropriate CSS class

                            const awayRow = document.createElement('tr'); // Use div for the rows
                            awayRow.classList.add('team-row'); // Add the appropriate CSS class
                            
                            const awayLogoContainer = document.createElement('td');
                            awayLogoContainer.classList.add('logo-container');
                            const awayLogo = document.createElement('img');
                            awayLogo.src = rowData[4].slice(1, -1);
                            awayLogo.width = 25;
                            awayLogo.height = 25;
                            awayLogoContainer.appendChild(awayLogo);

                            const awayNameContainer = document.createElement('td');
                            awayNameContainer.classList.add('name-container');
                            const awayName = document.createElement('a');
                            awayName.textContent = rowData[6].slice(1, -1);
                            awayName.href = `team_info?teamID=${rowData[5]}`
                            awayNameContainer.appendChild(awayName);

                            const awayRuns = document.createElement('td');
                            awayRuns.textContent = rowData[7];

                            const homeRow = document.createElement('tr'); // Use div for the rows
                            homeRow.classList.add('team-row'); // Add the appropriate CSS class

                            const homeLogoContainer = document.createElement('td');
                            homeLogoContainer.classList.add('logo-container');
                            const homeLogo = document.createElement('img');
                            homeLogo.src = rowData[0].slice(1, -1);
                            homeLogo.width = 25;
                            homeLogo.height = 25;
                            homeLogoContainer.appendChild(homeLogo);

                            const homeNameContainer = document.createElement('td');
                            homeNameContainer.classList.add('name-container');
                            const homeName = document.createElement('a');
                            homeName.textContent = rowData[2].slice(1, -1);
                            homeName.href = `team_info?teamID=${rowData[1]}`
                            homeNameContainer.appendChild(homeName);

                            const homeRuns = document.createElement('td');
                            homeRuns.textContent = rowData[3];
                            

                            if (awayScore > homeScore) {
                                awayName.classList.add('winning-score');
                                awayRuns.classList.add('winning-score');
                            } else if (homeScore > awayScore) {
                                homeName.classList.add('winning-score');
                                homeRuns.classList.add('winning-score');
                            }

                            awayRow.appendChild(awayLogoContainer);
                            awayRow.appendChild(awayNameContainer);

                            homeRow.appendChild(homeLogoContainer);
                            homeRow.appendChild(homeNameContainer);

                            awayRow.appendChild(awayRuns);
                            homeRow.appendChild(homeRuns);

                            const boxLink = document.createElement('a');
                            boxLink.textContent = 'Box';
                            boxLink.href = `game_info?gameID=${rowData[8].slice(1, -1)}&season=${rowData[9]}`;

                            gameContainer.appendChild(awayRow);
                            gameContainer.appendChild(homeRow);
                            gameContainer.appendChild(boxLink);

                            tableContainer.appendChild(gameContainer);

                        }
                        
                    })
                    .catch(error => console.error('Error fetching CSV:', error));
                
                    openSchedule(event, 'D1-schedule')
            }
            
            function openSchedule(evt, cityName) {
              var i;
              var x = document.querySelectorAll('[id$="-schedule"]');
              for (i = 0; i < x.length; i++) {
                x[i].style.display = "none";
              }
              var activebtn = document.getElementsByClassName("testbtn");
              for (i = 0; i < x.length; i++) {
                activebtn[i].className = activebtn[i].className.replace(" w3-dark-grey", "");
              }
              document.getElementById(cityName).style.display = "block";

              var dateInputValue = document.getElementById("dateInput").value;

              if(cityName === 'D1-schedule' & dateInputValue > '2023-06-08'){
                dateInputValue = '2023-06-08';
              } else if (cityName === 'D2-schedule' & dateInputValue > '2023-05-31') {
                dateInputValue = '2023-05-31';
              } else if (cityName === 'D3-schedule' & dateInputValue > '2023-06-07') {
                dateInputValue = '2023-06-07';
              }

              formattedDate = new Date(dateInputValue).toLocaleDateString('en-CA', { year: 'numeric', month: 'long', day: 'numeric' });
              
              var date = new Date(formattedDate);
              date.setDate(date.getDate() + 1);
              formattedDate = date.toLocaleDateString('en-CA', { year: 'numeric', month: 'long', day: 'numeric' });

                document.getElementById("dateOutput").textContent = formattedDate;
            }
            
            function openRPI(evt, cityName) {
              var i;
              var x = document.querySelectorAll('[id$="-rpi"]');
              for (i = 0; i < x.length; i++) {
                x[i].style.display = "none";
              }
              var activebtn = document.getElementsByClassName("testbtn");
              for (i = 0; i < x.length; i++) {
                activebtn[i].className = activebtn[i].className.replace(" w3-dark-grey", "");
              }
              document.getElementById(cityName).style.display = "block";
            }
            
            function openConf(evt, confName) {
              fetch(`conf_standings/${confName}.csv`)
                    .then(response => response.text())
                    .then(data => {
                        const rows = data.split('\n');
                        const tableContainer = document.getElementById('conf-standings');
                        const table = document.createElement('table');

                        // Create table header
                        const headerRow = document.createElement('tr');
                        const headers = rows[0].split(',').slice(0,-1);
                        headers.forEach(header => {
                            const th = document.createElement('th');
                            th.textContent = header;
                            headerRow.appendChild(th);
                        });
                        table.appendChild(headerRow);

                        // Create table rows
                        for (let i = 1; i < rows.length; i++) {
                            const row = document.createElement('tr');
                            const rowData = rows[i].split(',').slice(0,-1);
                            
                            rowData.forEach((cellData, index) => {
                            const cell = document.createElement(index === 0 ? 'th' : 'td');
                            let teamID = rows[i].split(',')[2];
                            
                            if(index !== 2){
                                if (index === 0) {
                                    const teamLink = document.createElement('a');
                                    teamLink.href = `team_info?teamID=${teamID}`;
                                    teamLink.textContent = cellData;
                                    cell.appendChild(teamLink);
                                } else {
                                    cell.textContent = cellData;
                                }   
                            }

                            row.appendChild(cell);
                            });

                            table.appendChild(row);
                        }
                  
                        tableContainer.innerHTML = '';

                        table.deleteRow(table.rows.length - 1) 
                    
                        // Add the table to the container
                        tableContainer.appendChild(table);
                  
                        const heading = document.getElementById('conf-name');
                        heading.textContent = confName;
                    })
            }
            
            openConf(event, 'SEC')
            openSchedule(event, 'D1-schedule')  
            openRPI(event, 'D1-rpi')  
            createDataTable_d1(today)
            createDataTable_d2(today)
            createDataTable_d3(today)
        </script>

    </body>

</html>
